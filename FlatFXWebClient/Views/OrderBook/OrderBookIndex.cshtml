@using FlatFXCore.BussinessLayer;

<div ng-controller="OrderBook" ng-init="init('@Html.Raw(ApplicationInformation.Instance.IsDemoUser)')">
    <div class="panel-danger form-horizontal order-book-panel">
        <div class="panel-heading">
            <h3 class="panel-title">@FlatFXResources.Resources.OrderBook</h3>
        </div>
        <div class="panel-body start-align">
            <div class="form-group col-xs-12">
                <label class="col-xs-4" for="pairSelect">@FlatFXResources.Resources.SelectPair:</label>
                <div class="col-xs-6">
                    <select class="form-control" name="pairSelect" id="pairSelect" ng-model="Key" ng-options="k as v for (k,v) in Pairs" ng-change="changePair()"></select>
                </div>
                <label class="col-xs-2">@*@FlatFXResources.Resources.OrderBookRate2*@{{ MidRate }}</label>
            </div>
            <div class="form-group col-xs-12">
                <label class="col-xs-4">@FlatFXResources.Resources.AmountRange ({{ CCY1() }})</label>
                <div class="col-xs-8" style="direction: ltr">
                    <div class="col-xs-5">
                        <input class="form-control" name="minAmountBuy" id="minAmountBuy" ng-model="minAmountBuy" />
                    </div>
                    <label class="col-xs-2"> - </label>
                    <div class="col-xs-5">
                        <input class="form-control" name="maxAmountBuy" id="maxAmountBuy" ng-model="maxAmountBuy" />
                    </div>
                </div>
            </div>
            <div class="col-xs-12 text-center">
                <div class="col-xs-6">
                    <table class="table table-responsive table-bordered table-hover table-striped table-order-buy">
                        <colgroup>
                            <col class="col-sm-4" />
                            <col class="col-sm-4" />
                            <col class="col-sm-4" />
                        </colgroup>
                        <thead>
                            <tr class="first-header">
                                <th colspan="4" class="text-center">@FlatFXResources.Resources.Buy2 {{ CCY1() }} @FlatFXResources.Resources.Sell2 {{ CCY2() }}</th>
                            </tr>
                            <tr class="second-header">
                                <th ng-class="orderByBuy == 'CompanyName' ? 'selected' :  ''"><a href="#" ng-click="changeSortingB('CompanyName')">@FlatFXResources.Resources.Partner</a></th>
                                <th ng-class="orderByBuy == 'MinAmount' ? 'selected' :  ''"><a href="#" ng-click="changeSortingB('MinAmount')">@FlatFXResources.Resources.MinAmount {{ CCY1() }}</a></th>
                                <th ng-class="orderByBuy == 'MaxAmount' ? 'selected' :  ''"><a href="#" ng-click="changeSortingB('MaxAmount')">@FlatFXResources.Resources.MaxAmount {{ CCY1() }}</a></th>
                            </tr>
                        </thead>
                        <tbody>
                            @*<tr>
                                <td></td>
                                <td><input class="form-control" name="minAmountBuy" id="minAmountBuy" ng-model="minAmountBuy" /></td>
                                <td><input class="form-control" name="maxAmountBuy" id="maxAmountBuy" ng-model="maxAmountBuy" /></td>
                            </tr>*@
                            <tr ng-repeat="order in OrdersToBuy | rangeFilter:'MinAmount':minAmountBuy:'MaxAmount':maxAmountBuy | orderBy:orderByBuy">
                                <td>{{ order.CompanyName }}</td>
                                <td>{{ order.MinAmount | number:0 }}</td>
                                <td>{{ order.MaxAmount | number:0 }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-xs-6">
                    <table class="table table-responsive table-bordered table-hover table-striped table-order-sell">
                        <colgroup>
                            <col class="col-sm-4" />
                            <col class="col-sm-4" />
                            <col class="col-sm-4" />
                        </colgroup>
                        <thead>
                            <tr class="first-header">
                                <th colspan="4" class="text-center">@FlatFXResources.Resources.Buy2 {{ CCY2() }} @FlatFXResources.Resources.Sell2 {{ CCY1() }}</th>
                            </tr>
                            <tr class="second-header">
                                <th ng-class="orderBySell == 'MaxAmount' ? 'selected' :  ''"><a href="#" ng-click="changeSortingS('MaxAmount')">@FlatFXResources.Resources.MaxAmount {{ CCY1() }}</a></th>
                                <th ng-class="orderBySell == 'MinAmount' ? 'selected' :  ''"><a href="#" ng-click="changeSortingS('MinAmount')">@FlatFXResources.Resources.MinAmount {{ CCY1() }}</a></th>
                                <th ng-class="orderBySell == 'CompanyName' ? 'selected' :  ''"><a href="#" ng-click="changeSortingS('CompanyName')">@FlatFXResources.Resources.Partner</a></th>
                            </tr>
                        </thead>
                        <tbody>
                            @*<tr>
                                <td><input class="form-control" name="maxAmountSell" id="maxAmountSell" ng-model="maxAmountSell" /></td>
                                <td><input class="form-control" name="minAmountSell" id="minAmountSell" ng-model="minAmountSell" /></td>
                                <td></td>
                            </tr>*@
                            <tr ng-repeat="order in OrdersToSell | rangeFilter:'MinAmount':minAmountBuy:'MaxAmount':maxAmountBuy | orderBy:orderBySell">
                                <td>{{ order.MaxAmount | number:0 }}</td>
                                <td>{{ order.MinAmount | number:0 }}</td>
                                <td>{{ order.CompanyName }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
